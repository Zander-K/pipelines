name: SDET Workflow

on:
  pull_request:
    branches:
      - main

jobs:
  build-and-upload:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout the code
        uses: actions/checkout@v4

      - name: Create a simple file
        run: echo "This is a simple file created by GitHub Actions." > simple-file.txt

      - name: Upload the file as an artifact
        uses: actions/upload-artifact@v4
        with:
          name: simple-file
          path: simple-file.txt

  build-and-release:
    runs-on: ubuntu-latest
    needs: build-and-upload
    permissions: 
      contents: write

    steps:
    - name: Checkout Code
      uses: actions/checkout@v4

    - name: Create Release
      uses: ./.github/actions/create-release
      with:
        PIPELINE_CLI_CONFIG: ${{ secrets.PIPELINE_CLI_CONFIG }}
        GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        WORKFLOW_NAME: build_web.yml
        APK_ARTIFACT_NAME: SIMPLE_FILE
        IPA_ARTIFACT_NAME: 
        ZIP_ARTIFACT_NAME: